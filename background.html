<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="options.js"></script>
    <script type="text/javascript">
    
    // Default settings
    if (!localStorage.allvetica) {
    
        var defaultFont = 'Helvetica';
        if (!isFontInstalled( defaultFont ))
            defaultFont = 'FreeSans';
            
        localStorage.allvetica = JSON.stringify( {
            replaceArial: true,
            replaceComicSans: false,
            replaceMarkerFelt: false,
            replacePapyrus: false,
            replacement: defaultFont,
            replacementCustom: defaultFont,
            replacementCustomValid: true
        } );
    }
    
    // Request listener
    chrome.extension.onRequest.addListener(
        function (request, sender, sendResponse) {
            if (request.data == "options") {
                var options = JSON.parse( localStorage.allvetica );
                sendResponse( { options: options } );
            } else {
                sendResponse( {} );
            }
        }
    );
    
    </script>
</head>
<body></body>
</html>
